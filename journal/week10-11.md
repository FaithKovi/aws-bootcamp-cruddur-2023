# Week 10 â€” CloudFormation

I was able to complete the homework challenges 
- [Prerequisite](#prerequisite)
- [Networking Layer](#networking-layer)
- [Cluster Layer](#cluster-layer)
- [Service Layer](#service-layer)
- [RDS Database](#rds-database)
- [DynamoDB Using SAM](#dynamodb-using-sam)
- [CICD](#cicd)
- [CFN Static Website Hosting for Frontend](#cfn-static-website-hosting-for-frontend)
- [Update Architecture Diagram](#update-architecture-diagram)

## Prerequisites
- Update `gitpod.yml` to install the following: cfn-lint, cfn-toml and cfn guard
- Create a new folder `aws/cfn` to store the cloudformation templates
  

## Networking Layer
### Steps
- Create a new folder `aws/cfn/networking` and navigate into the folder
- Create a new file `template.yaml` for the base networking concepts:
    - VPC (sets DNS hostnames for EC2 instances And Only IPV4, IPV6 is disabled)
    - Internet Gateway
    - Route Table (route to the IGW and route to Local)
    - Subnets (Subnets Explicity Associated to Route Table)
- Create a new files `config.toml` and `config.toml.example`
### Script
- Create a bash script `/bin/cfn/networking`
- Make script executable and run it
```
chmod u+x ./bin.cfn/networking
./bin/cfn/networking
```

 This creates a CrdNet Stack
![Proof]()
## Cluster Layer
### Steps
- Create a new folder `aws/cfn/cluster` and navigate into the folder
- Create a new file `template.yaml` for the networking and cluster configuration to support fargate containers:
  - ECS Fargate Cluster
  - Application Load Balanacer (ALB) (ipv4 only, internet facing and certificate attached from Amazon Certification Manager (ACM))
  - ALB Security Group
  - HTTPS Listener (sends naked domain to frontend Target Group and sends api. subdomain to backend Target Group)
  - HTTP Listener (redirects to HTTPS Listerner)
  - Backend Target Group
  - Frontend Target Group
- Create a new files `config.toml` and `config.toml.example`
### Script
- Create a bash script `/bin/cfn/cluster`
- Make script executable and run it
```
chmod u+x ./bin.cfn/cluster
./bin/cfn/cluster
```

 This creates a CrdCluster Stack

![Proof]()
## Service Layer
### Steps
- Create a new folder `aws/cfn/service` and navigate into the folder
- Create a new file `template.yaml` for the backend service configuration:
  - Task Definition
  - Fargate Service
  - Execution Role
  - Task Role
- Create a new files `config.toml` and `config.toml.example`
### Script
- Create a bash script `/bin/cfn/service`
- Make script executable and run it
```
chmod u+x ./bin.cfn/service
./bin/cfn/service
```

 This creates a CrdSrvBackendFlask Stack
![Proof]()
## RDS Database
### Steps
- Create a new folder `aws/cfn/db` and navigate into the folder
- Create a new file `template.yaml` for the primary Postgres RDS Database for the application:
  - RDS Instance
  - Database Security Group
  - DBSubnetGroup
- Create a new file `config.toml` 
### Script
- Create a bash script `/bin/cfn/db`
- Make script executable and run it
```
chmod u+x ./bin.cfn/db
./bin/cfn/db
```

 This creates a CrdDb Stack
![Proof]()
## DynamoDB Using SAM

![Proof]()
## CI/CD
### Steps
![Proof]()
## CFN Static Website Hosting for Frontend
### Steps
![Proof]()
## Update Architecture Diagram
### Steps
![Proof]()
